{"ts":1365358001753,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"from django.test import TestCase\nfrom django.test.client import Client\nfrom django.contrib.auth.models import User\nfrom django.contrib.sites.models import Site\n\nfrom dbe.forum.models import *\n\nclass SimpleTest(TestCase):\n    def setUp(self):\n        f = Forum.objects.create(title=\"forum\")\n        u = User.objects.create_user(\"ak\", \"ak@abc.org\", \"pwd\")\n        Site.objects.create(domain=\"test.org\", name=\"test.org\")\n        t = Thread.objects.create(title=\"thread\", creator=u, forum=f)\n        p = Post.objects.create(title=\"post\", body=\"body\", creator=u, thread=t)\n\n    def test(self):\n        c = Client()\n        c.login(username=\"ak\", password=\"pwd\")\n\n        r = c.get(\"/forum/\")\n        self.assertEquals(r.status_code, 200)\n        self.assertTrue('<a href=\"/forum/forum/1/\">forum</a>' in r.content)\n\n        r = c.get(\"/forum/forum/1/\")\n        self.assertEquals(r.status_code, 200)\n        self.assertTrue('<a href=\"/forum/thread/1/\">thread</a>' in r.content)\n        self.assertTrue('ak - post' in r.content)\n\n        r = c.get(\"/forum/thread/1/\")\n        self.assertEquals(r.status_code, 200)\n        self.assertTrue('<div class=\"ttitle\">thread</div>' in r.content)\n        self.assertTrue('<span class=\"title\">post</span>' in r.content)\n        self.assertTrue('body <br />' in r.content)\n        self.assertTrue('by ak |' in r.content)\n\n        r = c.post(\"/forum/new_thread/1/\", {\"subject\": \"thread2\", \"body\": \"body2\"})\n        r = c.post(\"/forum/reply/2/\", {\"subject\": \"post2\", \"body\": \"body3\"})\n\n        r = c.get(\"/forum/thread/2/\")\n        self.assertEquals(r.status_code, 200)\n        self.assertTrue('<div class=\"ttitle\">thread2</div>' in r.content)\n        self.assertTrue('<span class=\"title\">post2</span>' in r.content)\n        self.assertTrue('body2 <br />' in r.content)\n        self.assertTrue('body3 <br />' in r.content)\n"]],"start1":0,"start2":0,"length1":0,"length2":1851}]],"length":1851}
