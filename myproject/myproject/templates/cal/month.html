{% extends "base.html" %}
{% load staticfiles %}

{% block content %}
<div class="title">{{ mname }} {{ year }}</div>

<div class="calendar">
    <table>
    <tr>
        <th>M</th>
        <th>T</th>
        <th>W</th>
        <th>T</th>
        <th>F</th>
        <th>S</th>
        <th>S</th>
    </tr>

    {% for week in month_days %}
        <tr>
        {% for day, entries, current in week %}

            <!-- TD style: empty | day | current; onClick handler and highlight  -->
            <td class= {% if day == 0 %}"empty"{% endif %}
            {% if day != 0 and not current %}"day"{% endif %}
            {% if day != 0 and current %}"current"{% endif %}
            {% if day != 0 %}
                #onClick="parent.location='{% url "myproject.views.day" year month day %}'"
                #onMouseOver="this.bgColor='#eeeeee';"
                #onMouseOut="this.bgColor='white';"
            {% endif %} 
            data-id="{{ day }}" id="td-{{ day }}">

            <!-- Day number and entry snippets -->
            {% if day != 0 %}
                <div class="cell-{{ day }}" style="position:relative;">
                    {{ day }}
                    {% for entry in entries %}
                        <div style="margin-top:10px">
                        {{ entry.short|safe }}
                        </div>
                    {% endfor %}
                    {% if entries|length == 0 %}
                        <div class="edit-icon-{{ day }}" style="top:0; position:absolute; visibility: hidden">
                            <a href={% url "myproject.views.day" year month day %}><i class="icon-leaf icon-white"></i></a></div>
                    {% endif %}
                    {% if entries|length == 1 %}
                        <div style="top:0; position:absolute;">
                            <a href={% url "myproject.views.day" year month day %}><i class="icon-star icon-white"></i></a></div>
                    
                        <div class="pencil-icon-{{ day }}" style="position:absolute; visibility: hidden; padding-bottom:6px;">
                            <a href='#' data-content="<form><input type='text'/></form>" id='pencil-{{ day }}' data-toggle="tooltip" title="Edit snippet"><i class="icon-pencil icon-white"></i></a></div>    
                    {% endif %}
                </div>
            {% endif %}
            </td>
        {% endfor %}
        </tr>
    {% endfor %}
    </table>

    <div class="clear"></div>
</div>
{% endblock %}